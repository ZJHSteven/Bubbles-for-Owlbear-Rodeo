# D&D 属性气泡（Owlbear Rodeo 扩展）

> 简体中文使用说明。该扩展用于在 Owlbear Rodeo（OBR 2）中显示与编辑棋子（Token）的生命值、临时生命值与护甲等级等信息，并提供批量操作与掷骰指令。

## 安装与运行

- 在 OBR 扩展商店安装原插件（或本地开发预览）。
- 本地开发：
  - `corepack enable && corepack prepare pnpm@9.0.6 --activate`
  - `pnpm install`
  - `pnpm dev` 启动 Vite 开发服务器。

## 基本用法

- 右键棋子打开“编辑属性”面板：可快速修改【生命值/上限/临时生命值/护甲等级】。
- 支持行内运算：在任意数值框输入 `+6` 或 `-6` 后回车即可相对增减数值。
- 按 `Tab` 在输入框间切换焦点。

## 名称标签

- 可在设置中开启“名称标签”，开启后玩家与 GM 均可在右键面板为棋子设置名称，且名称不会与生命条重叠。

## 批量编辑与动作菜单

- GM 可打开“属性气泡面板”，一次性查看场景内的多个棋子并进行：
  - “伤害/治疗”应用：根据当前输入值对所选棋子批量加减生命值；
  - “覆盖”操作：一次性覆盖多个统计项。
- 面板内支持掷骰命令行：
  - `r 2d6+3`（公开掷骰）；
  - `gr 2d6+3`（GM 秘密掷骰）；
  - `d 2d6` / `h 1d8`（伤害/治疗掷骰）。
- “骰子记录”会展示本场景最近 20 次掷骰（依据可见性对玩家/GM 展示）。

## 设置项说明

- 偏移量：将属性气泡整体上移或下移。
- 对齐位置：将属性气泡吸附到棋子顶部或底部。
- 显示生命条：向玩家显示仅供 GM 查看 的生命条（不显示文字）。
- 分段显示：仅在生命值下降到指定分数时显示生命条分段。
- 名称标签：自定义名称标签，永不与属性气泡重叠。

## 兼容层

- 支持 Prop / Mount / Character 层棋子；当“生命值上限”> 0 时自动显示生命条；临时生命值与护甲等级同理。

## 常见问题

- 卸载扩展后请刷新页面以清理场景中的生命条与气泡；棋子数据不会因此被删除。

